jQuery.fn.extend({search_sort:function(e){var n={url:window.location.href,select_input:$(this).selector,container:e.container,grid_container:e.grid_container,title_wrapper:e.title_wrapper,price_wrapper:e.price_wrapper||".money",range_wrapper:e.range_wrapper||".price-range-container",range_submit:e.range_submit||"#sort_apply"},r="title-descending",t="title-ascending",i="price-lowest",a="price-highest",c="price-range";$(n.select_input).on("change",function(){var e=$(this).val();e===r?(n.sortByTitleDescending(),Cookies.set("sorting-option",r)):e===t?(n.sortByTitleascending(),Cookies.set("sorting-option",t)):e===i?(n.priceLowest(),Cookies.set("sorting-option",i)):e===a?(n.priceHighest(),Cookies.set("sorting-option",a)):e===c&&(n.priceRange(),Cookies.set("sorting-option",c)),e!==c&&$(n.range_wrapper).addClass("hide")}),$(n.range_submit).on("click",function(e){e.preventDefault(),n.rangeSubmit()}),n.sortByTitleDescending=function(){$.ajax({url:n.url,dataType:"html",success:function(e){var r=$(e).find(n.container).find(n.grid_container);r.sort(function(e,r){var t=e.querySelector(n.title_wrapper).innerHTML,i=r.querySelector(n.title_wrapper).innerHTML;return t<i?1:t>i?-1:0}),$(n.container).html(r)}})},n.sortByTitleascending=function(){$.ajax({url:n.url,dataType:"html",success:function(e){var r=$(e).find(n.container).find(n.grid_container);r.sort(function(e,r){var t=e.querySelector(n.title_wrapper).innerHTML,i=r.querySelector(n.title_wrapper).innerHTML;return t>i?1:t<i?-1:0}),$(n.container).html(r)}})},n.priceLowest=function(){$.ajax({url:n.url,dataType:"html",success:function(e){var r=$(e).find(n.container).find(n.grid_container);r.sort(function(e,n){return e.querySelector(".money").innerHTML.replace(/[^0-9\\.]/g,"")-n.querySelector(".money").innerHTML.replace(/[^0-9\\.]/g,"")}),$(n.container).html(r)}})},n.priceHighest=function(){$.ajax({url:n.url,dataType:"html",success:function(e){var r=$(e).find(n.container).find(n.grid_container);r.sort(function(e,r){var t=e.querySelector(n.price_wrapper).innerHTML.replace(/[^0-9\\.]/g,"");return r.querySelector(n.price_wrapper).innerHTML.replace(/[^0-9\\.]/g,"")-t}),$(n.container).html(r)}})},n.priceRange=function(){$(n.range_wrapper).removeClass("hide")},n.rangeSubmit=function(){var e=$(n.range_wrapper).find("#min-range").val(),r=$(n.range_wrapper).find("#max-range").val();e>=0&&r>=0&&$.ajax({url:n.url,dataType:"html",success:function(t){var i=$(t).find(n.container).find(n.grid_container),a=$(i).filter(function(){var t=$(this).find(n.price_wrapper).text().replace(/[^0-9\\.]/g,"");return(t=parseInt(t))>=e&&t<=r});$(n.container).html(a)}})};var o=Cookies.get("sorting-option");o===r?($(n.select_input).val(o).change(),n.sortByTitleDescending()):o===t?($(n.select_input).val(o).change(),n.sortByTitleascending()):o===i?($(n.select_input).val(o).change(),n.priceLowest()):o===a?($(n.select_input).val(o).change(),n.priceHighest()):o===c&&($(n.select_input).val(o).change(),n.priceRange())}});
